# План: установщик и обновления для Windows

## Цель
- Формат распространения: "скинул ссылку на GitHub Releases и всё".
- Небольшой установщик: без Whisper-модели внутри.
- Простые обновления: проверка/скачивание/установка прямо из приложения.

## Этап 1 (сделано в этом шаге)
- Интеграция Velopack в приложение (startup hook).
- Добавление `AppUpdateService` с источником обновлений из GitHub Releases.
- Добавление UI в "Настройки":
  - `Проверить обновления`
  - прогресс скачивания
  - `Установить обновление` (с перезапуском)
- Автопроверка обновлений при старте приложения.

## Этап 2 (в процессе)
- Мастер загрузки модели после установки:
  - прогресс по байтам и отмена
  - автостарт загрузки на первом запуске, если модели нет
  - ручная кнопка "Скачать модель Whisper"
- Мастер загрузки движка `faster-whisper-xxl`:
  - скачивание из официального GitHub release (`Purfview/whisper-standalone-win`)
  - распаковка `.7z` в `%LocalAppData%\AudioRecorder\runtime\faster-whisper-xxl`
  - автоэкспорт стабильных `env` переменных для переиспользования в других сервисах
- Унификация путей Whisper/модели через `WhisperPaths`.
- Осталось:
  - выбор разных моделей (`large-v2`/`medium`)
  - валидация целостности (hash)
  - финальная оптимизация процесса обновления runtime-движка между версиями приложения

## Этап 3
- Автоматизация релиза:
  - `dotnet publish` (x64)
  - упаковка `vpk pack`
  - публикация артефактов в GitHub Release
- README/Release notes с инструкцией для пользователя.

## Что скачивает друг из GitHub Releases
- Файл установщика вида `*-Setup.exe` (Velopack installer).
- Не `*.nupkg` и не `RELEASES`.

## Поток обновления для друга
- Нажимает `Проверить обновления`.
- Приложение скачивает обновление и показывает прогресс.
- Нажимает `Установить обновление`, приложение перезапускается на новой версии.
